(self.webpackChunk_aamasri_popup=self.webpackChunk_aamasri_popup||[]).push([[42],{869:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{$cache:()=>$cache,getAppliedStyle:()=>getAppliedStyle,getViewportOffset:()=>getViewportOffset,getZIndex:()=>getZIndex,hash:()=>hash,isInIframe:()=>isInIframe,isMobile:()=>isMobile,isTouchDevice:()=>isTouchDevice,isVisible:()=>isVisible,loaded:()=>loaded,onTopZIndex:()=>onTopZIndex,ready:()=>ready,screenResolution:()=>screenResolution,webpSupport:()=>webpSupport});const ready=()=>new Promise((resolve=>{"loading"!==document.readyState?resolve($cache()):document.addEventListener("DOMContentLoaded",(()=>{resolve($cache())}))})),loaded=()=>new Promise((resolve=>{"complete"===document.readyState?resolve($cache()):window.addEventListener("load",(()=>{resolve($cache())}))})),selectorCache={};function $cache(){return selectorCache.hasOwnProperty("$body")&&selectorCache.$body.length||(selectorCache.$window=jQuery(window),selectorCache.$document=jQuery(document),selectorCache.$body=jQuery("body")),selectorCache}function isInIframe(){return window.location!==window.parent.location}let cachedIsTouchDevice;function isTouchDevice(){if("boolean"==typeof cachedIsTouchDevice)return cachedIsTouchDevice;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return cachedIsTouchDevice=!0,cachedIsTouchDevice;const query=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join("");return cachedIsTouchDevice=!!function(query){return cachedIsTouchDevice=window.matchMedia(query).matches,cachedIsTouchDevice}(query),cachedIsTouchDevice}function isMobile(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}function isVisible(el){if(!el instanceof Object)return!1;if(el instanceof jQuery&&(el=el[0]),"none"===getAppliedStyle(el,"display")||"hidden"===getAppliedStyle(el,"visibility")||parseFloat(getAppliedStyle(el,"opacity"))<.1)return!1;try{const rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(error){return console.warn("dom-utils.isVisible(el) threw error",error),!1}}function getViewportOffset($element){if(!($element=jQuery($element)).length)return void console.error("function getViewportOffset(element) expects a DOM element or jQuery object!");let offset;try{offset=$element.offset()}catch(error){return void console.error("function getViewportOffset(element) could not determine the element offset!")}const $win=$cache().$window,left=offset.left-$win.scrollLeft(),top=offset.top-$win.scrollTop();return{top:top,right:$win.outerWidth()-left-$element.outerWidth(),bottom:$win.height()-top-$element.outerHeight(),left:left}}function onTopZIndex(){let zTop=0;const elements=document.getElementsByTagName("*");for(let i=0;i<elements.length;i++){let zIndex=getZIndex(elements[i]);zIndex&&zIndex>zTop&&(zTop=zIndex)}return zTop}function getZIndex(element,recursive=!1){let zIndex=getAppliedStyle(element,"z-Index")||0;return zIndex=isNaN(zIndex)||2147483647==zIndex?0:parseInt(zIndex),recursive&&0===zIndex?getZIndex(element.parentNode,!0):zIndex}function getAppliedStyle(el,style){if(el instanceof jQuery&&(el=el[0]),!el instanceof Object)return"";try{return window.getComputedStyle(el).getPropertyValue(style)}catch(error){return console.warn("dom-utils.getAppliedStyle(el, style) threw error",error),""}}function webpSupport(feature="alpha"){return new Promise(((resolve,reject)=>{const img=new Image;img.onload=()=>{img.width>0&&img.height>0?resolve(`This browser supports webp images with ${feature}.`):reject(`This browser does NOT fully support webp images with ${feature}.`)},img.onerror=()=>{reject(`This browser does NOT fully support webp images with ${feature}`)},img.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[feature]}))}function screenResolution(){const pixelDensity=window.outerWidth*window.outerHeight;return pixelDensity>15e5?"hi":pixelDensity>5e5?"med":"lo"}function hash(content){let hash="";if(0===content.length)return hash;for(let i=0;i<content.length;i++){hash=(hash<<5)-hash+content.charCodeAt(i),hash&=hash}return hash}},687:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{close:()=>close,closeAll:()=>closeAll,closeLast:()=>closeLast,open:()=>open});var _close_icon_svg__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(982),_close_icon_svg__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_close_icon_svg__WEBPACK_IMPORTED_MODULE_0__),_aamasri_dom_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(869);const debug=!1;let loadUrlBusy,popupCount=0,$body,$window;async function open(options){options=options||{},debug&&console.debug("popup.open invoked with options",options),void 0===window.jQuery&&(window.jQuery=await __webpack_require__.e(729).then(__webpack_require__.t.bind(__webpack_require__,755,23)),window.jQuery=window.jQuery.default),debug&&console.debug("jQuery loaded",typeof window.jQuery),void 0===window.anime&&(window.anime=await __webpack_require__.e(342).then(__webpack_require__.bind(__webpack_require__,30)),window.anime=window.anime.default),debug&&console.debug("animejs loaded",typeof window.anime);const domUtils=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,869));debug&&console.debug("dom-utils loaded",typeof domUtils),$body=$body||domUtils.$cache().$body,$window=$window||domUtils.$cache().$window,options.title||options.source||(options.title="Popup Cheat Sheet",options.source=usageInstructions);let popupBody,popupId="popup-"+ ++popupCount,popupTitle=options.title||"";const sourceIsUrl="string"==typeof options.source&&(/^https?:\/\/[a-z]+/.test(options.source)||/^\/[a-z]+/.test(options.source));if(!sourceIsUrl){debug&&console.debug("not url");try{const sourceElement=document.querySelector(options.source);debug&&console.debug("source is an element"),sourceElement&&(popupBody=sourceElement.innerHTML,popupTitle=popupTitle||elementTitle(sourceElement)||""),debug&&console.debug(`popup title:${popupTitle} \n\n body:${popupBody}`)}catch(error){debug&&console.debug(`source "${options.source}" is not a selector`)}popupBody=popupBody||options.source||""}options.replace=void 0===options.replace||!!options.replace,options.replace&&closeAll();const modalDiv=options.modal?`<div class="popup-modal" data-for="${popupId}"></div>`:"",createdData=`data-created="${Date.now()}"`;let classes=[];options.persistent&&classes.push("persistent"),options.classes&&"string"==typeof options.classes&&classes.push(options.classes);const attributes=options.attributes||"";let $popup=jQuery(`${modalDiv}\n                        <div id="${popupId}" class="popup-box ${classes.join(" ")}" ${attributes} ${createdData}>\n                            <div class="arrow"></div>\n                            \n                            <div class="icons">\n                                <span class="icon-close">${_close_icon_svg__WEBPACK_IMPORTED_MODULE_0___default()}</span>\n                            </div>\n                            \n                            <div class="popup-body">\n                                ${popupBody||"Loading •••"}\n                            </div>\n                        </div>`);$popup.appendTo($body);const onTop=domUtils.onTopZIndex();onTop&&$popup.css("z-index",onTop),options.modal&&($popup=$body.find(`#${popupId}`)),debug&&console.debug(`popup ${popupId} appended to body`,$popup.length),initPopupListeners(),options.onClose&&bindCloseCallback($popup,options.onClose);let openAnimation=openAnimatePopup($popup,options.target);if(sourceIsUrl){if(loadUrlBusy)return console.warn("popup cancelled because another popup is busy loading"),void $popup.remove();loadUrlBusy=window.setTimeout((function(){loadUrlBusy=!1}),5e3);try{popupBody=await jQuery.get(options.source),popupBody=options.fragment?jQuery(popupBody).find(options.fragment).html():popupBody,popupBody.includes("<head")&&(popupBody=`<iframe src="${options.source}"></iframe>`,$popup.addClass("has-iframe"))}catch(error){popupBody=error.responseText?error.responseText:error.statusText?`Loading url ${options.source} failed with "${error.statusText}"`:"Loading url ${options.source} failed!"}loadUrlBusy=!1,$popup.find(".popup-body").html(popupBody),debug&&console.debug("replace content:",$popup.find(".popup-body").html()),openAnimation.pause(),openAnimation=openAnimatePopup($popup,options.target)}return await openAnimation.finished,$popup.find(".icons svg").fadeIn(),$popup[0]}function openAnimatePopup($popup){let target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;debug&&console.debug("openAnimatePopup ",$popup[0].id);const popupWidth=$popup.width(),popupHeight=$popup.height(),popupArea=popupHeight*popupWidth,windowWidth=$window.width(),windowHeight=$window.height(),windowArea=windowHeight*windowWidth,large=popupArea/windowArea>.3;large&&$popup.addClass("large"),debug&&console.debug("popup size relative to window",popupArea/windowArea);const formInput=document.querySelector(`#${$popup[0].id} .popup-body input`);let animeConfig;formInput&&(formInput.focus(),formInput.select());const $target=jQuery(target);return $target.length&&(0,_aamasri_dom_utils__WEBPACK_IMPORTED_MODULE_1__.isVisible)($target)?(positionPopup($popup,$target,40),animeConfig={targets:$popup[0],scale:[0,1],duration:300,easing:"easeInOutCubic"}):animeConfig={targets:$popup[0],translateX:["-50%","-50%"],translateY:["-50%","-50%"],scale:[0,1],duration:300,easing:"easeInOutCubic"},anime(animeConfig)}function positionPopup(popup,target){let TARGET_MARGIN=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,PAGE_MARGIN=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;const $popup=jQuery(popup),$target=jQuery(target);if(!$popup.length||!$target.length||!(0,_aamasri_dom_utils__WEBPACK_IMPORTED_MODULE_1__.isVisible)($target))return;const POPUP_WIDTH=$popup.outerWidth(),POPUP_HEIGHT=$popup.outerHeight(),TARGET_WIDTH=$target.outerWidth(),TARGET_HEIGHT=$target.outerHeight(),WINDOW_WIDTH=jQuery(window).width(),WINDOW_HEIGHT=jQuery(window).height(),targetViewOffset=(0,_aamasri_dom_utils__WEBPACK_IMPORTED_MODULE_1__.getViewportOffset)($target),DOC_WIDTH=jQuery(document).width(),DOC_HEIGHT=jQuery(document).height(),targetDocOffset=$target.offset();targetDocOffset.right=DOC_WIDTH-targetDocOffset.left-TARGET_WIDTH,targetDocOffset.bottom=DOC_HEIGHT-targetDocOffset.top-TARGET_HEIGHT,console.log("targetDocOffset",targetDocOffset);const left=targetViewOffset.left>=targetViewOffset.right,top=targetViewOffset.top>=targetViewOffset.bottom,horizontalSpace=(left?targetViewOffset.left:targetViewOffset.right)-TARGET_MARGIN-PAGE_MARGIN,verticalSpace=(top?targetViewOffset.top:targetViewOffset.bottom)-TARGET_MARGIN-PAGE_MARGIN,beside=horizontalSpace>=POPUP_WIDTH;if(POPUP_WIDTH>horizontalSpace&&POPUP_HEIGHT>verticalSpace)return;console.log(`positionPopup \n        target width: ${TARGET_WIDTH} \n        target height: ${TARGET_HEIGHT}\n\n        popup width: ${POPUP_WIDTH} \n        popup height: ${POPUP_HEIGHT}\n\n        window width: ${WINDOW_WIDTH}\n        window height: ${WINDOW_HEIGHT} \n\n        requested target margin: ${TARGET_MARGIN}\n        requested page margin: ${PAGE_MARGIN}\n        \n        target viewport offset left: ${Math.round(targetViewOffset.left)} \n        target viewport offset right: ${Math.round(targetViewOffset.right)} \n        target viewport offset top: ${Math.round(targetViewOffset.top)} \n        target viewport offset bottom: ${Math.round(targetViewOffset.bottom)} \n\n        horizontal space: ${Math.round(horizontalSpace)} \n        vertical space: ${Math.round(verticalSpace)}\n        \n        show on left: ${left}\n        show on top: ${top}\n        show beside: ${beside}\n    `);const popupCss={overflow:"visible",top:"auto",right:"auto",bottom:"auto",left:"auto",zIndex:(0,_aamasri_dom_utils__WEBPACK_IMPORTED_MODULE_1__.onTopZIndex)()},$arrow=$popup.find(".arrow"),arrow=$arrow[0],ARROW_SIZE=$arrow.outerWidth();beside?(left?(popupCss.right=WINDOW_WIDTH-targetDocOffset.left+TARGET_MARGIN+"px",$arrow.addClass("right")):(popupCss.left=WINDOW_WIDTH-targetDocOffset.right+TARGET_MARGIN+"px",$arrow.addClass("left")),top?(popupCss.bottom=targetDocOffset.bottom-TARGET_MARGIN+"px",arrow.style.marginTop=POPUP_HEIGHT-3*ARROW_SIZE-TARGET_HEIGHT/2+"px"):(popupCss.top=targetDocOffset.top-TARGET_MARGIN+"px",arrow.style.marginTop=ARROW_SIZE/2+TARGET_HEIGHT/2+"px")):(popupCss.maxWidth=WINDOW_WIDTH-2*PAGE_MARGIN,left?(popupCss.left=PAGE_MARGIN+"px",arrow.style.marginLeft=targetDocOffset.left-$arrow.offset().left+TARGET_WIDTH/2+ARROW_SIZE/3+"px"):(popupCss.right=PAGE_MARGIN+"px",arrow.style.marginLeft=targetDocOffset.left-$arrow.offset().left+TARGET_WIDTH/2-ARROW_SIZE+"px"),top?(popupCss.top=targetDocOffset.top-POPUP_HEIGHT-TARGET_MARGIN+"px",$arrow.addClass("bottom")):(popupCss.bottom=targetDocOffset.bottom-POPUP_HEIGHT-TARGET_MARGIN+"px",console.log(`css.bottom = (${targetDocOffset.bottom} - ${POPUP_HEIGHT} - ${TARGET_MARGIN}) + 'px' =`,popupCss.bottom),$arrow.addClass("top"))),console.log("popup css",popupCss),$popup.css(popupCss)}function executeCallback(callback){switch(typeof callback){case"function":return void callback();case"string":try{eval(callback)}catch(error){console.error("close callback failed with",error)}}}function closeAll(){const popups=getAllPopups(),modals=getAllModals();popups.length&&popups.forEach((popup=>{popup.remove()})),modals.length&&modals.forEach((modal=>{modal.remove()}))}function closeLast(){const popups=getAllPopups();if(popups.length){const lastPopup=popups[popups.length-1];lastPopup.classList.contains("persistent")||close(lastPopup)}}function close(popup){const $popup=jQuery(popup).closest(".popup-box");if(!$popup.length)return;popup=$popup[0],debug&&console.debug("  closing popup",popup.id);const createdAt=popup.getAttribute("data-created");if(Date.now()-createdAt<500)return void(debug&&console.debug("    cancelled because it's less than a second old"));debug&&console.debug(`    popup is ${Date.now()-createdAt} mS old`);const relatedModal=getRelatedModal(popup);anime({targets:popup,scale:[{value:[1,.9]}],opacity:[{value:[1,0]}],duration:300,easing:"linear"}).finished.then((()=>{popup.remove(),relatedModal&&relatedModal.remove()}))}function getAllPopups(){return document.querySelectorAll(".popup-box")}function getAllModals(){return document.querySelectorAll(".popup-modal")}function getRelatedModal(popup){return document.querySelector(`.popup-modal[data-for="${popup.id}"]`)}function getRelatedPopup(modal){const popupId=modal.getAttribute("data-for");return document.getElementById(popupId)}let blurHandlerBound=!1;function initPopupListeners(){blurHandlerBound||(blurHandlerBound=!0,jQuery(document).on("click",(event=>{const $clicked=jQuery(event.target);debug&&console.debug(`clicked on ${$clicked[0].nodeName} "${$clicked.text().substring(0,10)}.."`);const $closestPopupBox=$clicked.closest(".popup-box");if($closestPopupBox.length){debug&&console.debug("  clicked on popup",$closestPopupBox[0].id);const createdAt=$closestPopupBox[0].getAttribute("data-created");if(getAllPopups().forEach((popup=>{popup.getAttribute("data-created")>createdAt&&close(popup)})),$clicked.closest(".icon-close").length&&(debug&&console.debug("  clicked on popup close button"),close($closestPopupBox)),$clicked.closest(".icon-fullscreen").length){const url=$closestPopupBox.data("url");debug&&console.debug("  clicked on popup fullscreen button",url),window.open(url,"_self")}return}const $closestModalOverlay=$clicked.closest(".popup-modal");if($closestModalOverlay.length){const relatedPopup=getRelatedPopup($closestModalOverlay[0]);if(relatedPopup){debug&&console.debug("  clicked on modal for popup",relatedPopup.id);const createdAt=relatedPopup.getAttribute("data-created");getAllPopups().forEach((popup=>{popup.getAttribute("data-created")>=createdAt&&(popup.classList.contains("persistent")||close(popup))}))}else debug&&console.debug("  clicked on a modal but it's related popup is no longer in the DOM")}else closeLast()})).on("keydown",(event=>{debug&&console.debug("key pressed",event.key),"Escape"===event.key&&(document.activeElement&&"BODY"!==document.activeElement.nodeName?(debug&&console.debug("blurring",document.activeElement.nodeName),document.activeElement.blur()):closeLast())})))}function bindCloseCallback($popup,callback){new MutationObserver((mutationsList=>{mutationsList.forEach((mutation=>{mutation.removedNodes.forEach((node=>{$popup.is(jQuery(node))&&(debug&&console.debug("popup removed:",node),executeCallback(callback))}))}))})).observe(document.querySelector("body"),{childList:!0,subtree:!0})}function elementTitle(element){return element instanceof jQuery?element[0].title||element.data("title")||"":element.title||jQuery(element).data("title")||""}const usageInstructions='Usage instructions for developers: \n<pre style="color:#888; font-size: 12px;">\noptions object {\n    source:     string | object     the content source: html content, selector, url, or element\n    target:     string | object     popup target: html content, selector, jQuery object, or element\n    fragment:   selector            selector by which to isolate a portion of the source HTML\n    modal:      boolean             page background dimming\n    replace:    boolean             whether to close any existing popups or layer up\n    persistent: boolean             whether ESC/blur automatically closes the popup\n    onClose:    function | string   callback function or eval(string) to execute after popup dismissed\n    classes:    string              classes to apply to the popup container element\n    attributes: string              attributes to apply to the popup container element eg. \'data-ignore-events="true"\'\n}\n</pre>\n\n<pre style="color: royalblue;  font-size: 12px;">\npopup.open(options).then(function() {\n    console.log(\'popup launched\');\n});\n</pre>'},982:module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="28 28 116 116"><path d="M35.76335,28.59668c-2.91628,0.00077 -5.54133,1.76841 -6.63871,4.47035c-1.09737,2.70194 -0.44825,5.79937 1.64164,7.83336l45.09961,45.09961l-45.09961,45.09961c-1.8722,1.79752 -2.62637,4.46674 -1.97164,6.97823c0.65473,2.51149 2.61604,4.4728 5.12753,5.12753c2.51149,0.65473 5.18071,-0.09944 6.97823,-1.97165l45.09961,-45.09961l45.09961,45.09961c1.79752,1.87223 4.46675,2.62641 6.97825,1.97168c2.5115,-0.65472 4.47282,-2.61605 5.12755,-5.12755c0.65472,-2.5115 -0.09946,-5.18073 -1.97168,-6.97825l-45.09961,-45.09961l45.09961,-45.09961c2.11962,-2.06035 2.75694,-5.21064 1.60486,-7.93287c-1.15207,-2.72224 -3.85719,-4.45797 -6.81189,-4.37084c-1.86189,0.05548 -3.62905,0.83363 -4.92708,2.1696l-45.09961,45.09961l-45.09961,-45.09961c-1.34928,-1.38698 -3.20203,-2.16948 -5.13704,-2.1696z"></path></svg>'}}]);